<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LUFA Library - Mass Storage Host Demo: Lib/MassStoreCommands.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4db3c79b3edd13d084f3536429444e1a.html">Lib</a>
  </div>
</div>
<div class="contents">
<h1>MassStoreCommands.h File Reference</h1><code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="a00012.html">MassStorageHost.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00010.html">SCSI_Codes.h</a>&quot;</code><br/>
<code>#include &lt;LUFA/Drivers/USB/USB.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html">CommandBlockWrapper_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00002.html">CommandStatusWrapper_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00003.html">SCSI_Capacity_t</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#acb9a039894443da8410cb4fa3df22be6">REQ_MassStorageReset</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac0876c839c43c9c05f5a917d3b46ceaf">REQ_GetMaxLUN</a>&nbsp;&nbsp;&nbsp;0xFE</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac6720d81afa7c89b4ac87928c591883c">CBW_SIGNATURE</a>&nbsp;&nbsp;&nbsp;0x43425355UL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aa64c08764b0b19dd484ee177c32bcf49">CSW_SIGNATURE</a>&nbsp;&nbsp;&nbsp;0x53425355UL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a67558cbba737fb0f865d76920dde0449">COMMAND_DIRECTION_DATA_OUT</a>&nbsp;&nbsp;&nbsp;(0 &lt;&lt; 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a0d1cac717714b1805917994b1671b61b">COMMAND_DIRECTION_DATA_IN</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ae99a70b8e008b17033dcfb19c8976cb0">COMMAND_DATA_TIMEOUT_MS</a>&nbsp;&nbsp;&nbsp;2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ab3dcc3c4f280d547ff56a8f4d3f37ccb">MASS_STORE_DATA_IN_PIPE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aa8602b23c0ce3697046347f05cde7286">MASS_STORE_DATA_OUT_PIPE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a4aa013dcadafef41c5377c0f5e7c4184">MASS_STORE_SCSI_COMMAND_FAILED</a>&nbsp;&nbsp;&nbsp;0xC0</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59f">MassStorageHost_CommandStatusCodes_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa0161cfb22f2537931b6703dd1210dcff">Command_Pass</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa9c35fdf9575a3704e1b90560ff2cba80">Command_Fail</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa0954410ecc72a454dfb225821db81d3b">Phase_Error</a> =  2
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a3496e09635f7f4ab8333ba21440c31a0">MassStore_SendCommand</a> (<a class="el" href="a00001.html">CommandBlockWrapper_t</a> *SCSICommandBlock, void *BufferPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a0c13e34b17c949e38edd360284deeac0">MassStore_WaitForDataReceived</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a2b2ede2bceb24dce8ddedc55918a6f8c">MassStore_SendReceiveData</a> (<a class="el" href="a00001.html">CommandBlockWrapper_t</a> *SCSICommandBlock, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aad9f24a3b8ab2ad66659777dc931b7c9">MassStore_GetReturnedStatus</a> (<a class="el" href="a00002.html">CommandStatusWrapper_t</a> *SCSICommandStatus) ATTR_NON_NULL_PTR_ARG(1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac6b179eea18f5d947233a95bb5d85483">MassStore_MassStorageReset</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ad80d5405f03c08f662de9db05163f82b">MassStore_GetMaxLUN</a> (uint8_t *const MaxLUNIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aab76d2c060a6e26073f4d03eb6abf46f">MassStore_RequestSense</a> (const uint8_t LUNIndex, <a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a> *const SensePtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a919d454911b919c81784937f273d4062">MassStore_Inquiry</a> (const uint8_t LUNIndex, <a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a> *const InquiryPtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac205f3a5a0545a7ce4fd12f275f47848">MassStore_ReadDeviceBlock</a> (const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ab07ae7fad4ea55bccea42aba8e87b94a">MassStore_WriteDeviceBlock</a> (const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a7e23edaaf24892d6128a7b4c46bfbd5e">MassStore_ReadCapacity</a> (const uint8_t LUNIndex, <a class="el" href="a00003.html">SCSI_Capacity_t</a> *const CapacityPtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ad8e1a76103edb7da05f5c28d805ad985">MassStore_TestUnitReady</a> (const uint8_t LUNIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a2886bf820904f36ca464ba357219e649">MassStore_PreventAllowMediumRemoval</a> (const uint8_t LUNIndex, const bool PreventRemoval)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Header file for <a class="el" href="a00008.html">MassStoreCommands.c</a>. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac6720d81afa7c89b4ac87928c591883c"></a><!-- doxytag: member="MassStoreCommands.h::CBW_SIGNATURE" ref="ac6720d81afa7c89b4ac87928c591883c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBW_SIGNATURE&nbsp;&nbsp;&nbsp;0x43425355UL</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Command Block Wrapper signature byte, for verification of valid CBW blocks </p>

</div>
</div>
<a class="anchor" id="ae99a70b8e008b17033dcfb19c8976cb0"></a><!-- doxytag: member="MassStoreCommands.h::COMMAND_DATA_TIMEOUT_MS" ref="ae99a70b8e008b17033dcfb19c8976cb0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DATA_TIMEOUT_MS&nbsp;&nbsp;&nbsp;2000</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Timeout period between the issuing of a CBW to a device, and the reception of the first packet </p>

</div>
</div>
<a class="anchor" id="a0d1cac717714b1805917994b1671b61b"></a><!-- doxytag: member="MassStoreCommands.h::COMMAND_DIRECTION_DATA_IN" ref="a0d1cac717714b1805917994b1671b61b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_IN&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data direction mask for the Flags field of a CBW, indicating Device-to-Host transfer direction </p>

</div>
</div>
<a class="anchor" id="a67558cbba737fb0f865d76920dde0449"></a><!-- doxytag: member="MassStoreCommands.h::COMMAND_DIRECTION_DATA_OUT" ref="a67558cbba737fb0f865d76920dde0449" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_OUT&nbsp;&nbsp;&nbsp;(0 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data direction mask for the Flags field of a CBW, indicating Host-to-Device transfer direction </p>

</div>
</div>
<a class="anchor" id="aa64c08764b0b19dd484ee177c32bcf49"></a><!-- doxytag: member="MassStoreCommands.h::CSW_SIGNATURE" ref="aa64c08764b0b19dd484ee177c32bcf49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CSW_SIGNATURE&nbsp;&nbsp;&nbsp;0x53425355UL</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Command Static Wrapper signature byte, for verification of valid CSW blocks </p>

</div>
</div>
<a class="anchor" id="ab3dcc3c4f280d547ff56a8f4d3f37ccb"></a><!-- doxytag: member="MassStoreCommands.h::MASS_STORE_DATA_IN_PIPE" ref="ab3dcc3c4f280d547ff56a8f4d3f37ccb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_DATA_IN_PIPE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pipe number of the Mass Storage data IN pipe </p>

</div>
</div>
<a class="anchor" id="aa8602b23c0ce3697046347f05cde7286"></a><!-- doxytag: member="MassStoreCommands.h::MASS_STORE_DATA_OUT_PIPE" ref="aa8602b23c0ce3697046347f05cde7286" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_DATA_OUT_PIPE&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pipe number of the Mass Storage data OUT pipe </p>

</div>
</div>
<a class="anchor" id="a4aa013dcadafef41c5377c0f5e7c4184"></a><!-- doxytag: member="MassStoreCommands.h::MASS_STORE_SCSI_COMMAND_FAILED" ref="a4aa013dcadafef41c5377c0f5e7c4184" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_SCSI_COMMAND_FAILED&nbsp;&nbsp;&nbsp;0xC0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Additional error code for Mass Storage functions when a device returns a logical command failure </p>

</div>
</div>
<a class="anchor" id="ac0876c839c43c9c05f5a917d3b46ceaf"></a><!-- doxytag: member="MassStoreCommands.h::REQ_GetMaxLUN" ref="ac0876c839c43c9c05f5a917d3b46ceaf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_GetMaxLUN&nbsp;&nbsp;&nbsp;0xFE</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Class specific request to retrieve the maximum Logical Unit Number (LUN) index of the attached device </p>

</div>
</div>
<a class="anchor" id="acb9a039894443da8410cb4fa3df22be6"></a><!-- doxytag: member="MassStoreCommands.h::REQ_MassStorageReset" ref="acb9a039894443da8410cb4fa3df22be6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_MassStorageReset&nbsp;&nbsp;&nbsp;0xFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Class specific request to reset the Mass Storage interface of the attached device </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59f"></a><!-- doxytag: member="MassStoreCommands.h::MassStorageHost_CommandStatusCodes_t" ref="a95307d6a92e0e35f62db1a87d322d59f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59f">MassStorageHost_CommandStatusCodes_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CSW status return codes, indicating the overall status of the issued CBW </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa0161cfb22f2537931b6703dd1210dcff"></a><!-- doxytag: member="Command_Pass" ref="a95307d6a92e0e35f62db1a87d322d59fa0161cfb22f2537931b6703dd1210dcff" args="" -->Command_Pass</em>&nbsp;</td><td>
<p>Command completed successfully </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa9c35fdf9575a3704e1b90560ff2cba80"></a><!-- doxytag: member="Command_Fail" ref="a95307d6a92e0e35f62db1a87d322d59fa9c35fdf9575a3704e1b90560ff2cba80" args="" -->Command_Fail</em>&nbsp;</td><td>
<p>Command failed to complete successfully </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa0954410ecc72a454dfb225821db81d3b"></a><!-- doxytag: member="Phase_Error" ref="a95307d6a92e0e35f62db1a87d322d59fa0954410ecc72a454dfb225821db81d3b" args="" -->Phase_Error</em>&nbsp;</td><td>
<p>Phase error while processing the issued command </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad80d5405f03c08f662de9db05163f82b"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_GetMaxLUN" ref="ad80d5405f03c08f662de9db05163f82b" args="(uint8_t *const MaxLUNIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_GetMaxLUN </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const &nbsp;</td>
          <td class="paramname"> <em>MaxLUNIndex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a Mass Storage class specific request to determine the index of the highest numbered Logical Unit in the attached device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>MaxLUNIndex</em>&nbsp;</td><td>Pointer to the location that the maximum LUN index value should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the USB_Host_SendControlErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="aad9f24a3b8ab2ad66659777dc931b7c9"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_GetReturnedStatus" ref="aad9f24a3b8ab2ad66659777dc931b7c9" args="(CommandStatusWrapper_t *SCSICommandStatus) ATTR_NON_NULL_PTR_ARG(1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t MassStore_GetReturnedStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00002.html">CommandStatusWrapper_t</a> *&nbsp;</td>
          <td class="paramname"> <em>SCSICommandStatus</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a919d454911b919c81784937f273d4062"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_Inquiry" ref="a919d454911b919c81784937f273d4062" args="(const uint8_t LUNIndex, SCSI_Inquiry_Response_t *const InquiryPtr) ATTR_NON_NULL_PTR_ARG(2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_Inquiry </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a> *const &nbsp;</td>
          <td class="paramname"> <em>InquiryPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Inquiry command to the attached device, to determine the device's information. This gives information on the device's capabilities.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>InquiryPtr</em>&nbsp;</td><td>Pointer to the inquiry data structure where the inquiry data from the device is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ac6b179eea18f5d947233a95bb5d85483"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_MassStorageReset" ref="ac6b179eea18f5d947233a95bb5d85483" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_MassStorageReset </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a Mass Storage class specific request to reset the attached device's Mass Storage interface, readying the device for the next CBW.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the USB_Host_SendControlErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a2886bf820904f36ca464ba357219e649"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_PreventAllowMediumRemoval" ref="a2886bf820904f36ca464ba357219e649" args="(const uint8_t LUNIndex, const bool PreventRemoval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_PreventAllowMediumRemoval </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&nbsp;</td>
          <td class="paramname"> <em>PreventRemoval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Device Prevent/Allow Medium Removal command to the attached device, to lock the physical media from being removed. This is a legacy command for SCSI disks with removable storage (such as ZIP disks), but should still be issued before the first read or write command is sent.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>PreventRemoval</em>&nbsp;</td><td>Whether or not the LUN media should be locked to prevent removal or not</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a7e23edaaf24892d6128a7b4c46bfbd5e"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_ReadCapacity" ref="a7e23edaaf24892d6128a7b4c46bfbd5e" args="(const uint8_t LUNIndex, SCSI_Capacity_t *const CapacityPtr) ATTR_NON_NULL_PTR_ARG(2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_ReadCapacity </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00003.html">SCSI_Capacity_t</a> *const &nbsp;</td>
          <td class="paramname"> <em>CapacityPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Device Read Capacity command to the attached device, to determine the capacity of the given Logical Unit within the device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>CapacityPtr</em>&nbsp;</td><td>Device capacity structure where the capacity data is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ac205f3a5a0545a7ce4fd12f275f47848"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_ReadDeviceBlock" ref="ac205f3a5a0545a7ce4fd12f275f47848" args="(const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_ReadDeviceBlock </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>BlockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>Blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&nbsp;</td>
          <td class="paramname"> <em>BlockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>BufferPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Device Block Read command to the attached device, to read in one or more data blocks from the storage medium into a buffer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>BlockAddress</em>&nbsp;</td><td>Start block address to read from </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>Blocks</em>&nbsp;</td><td>Number of blocks to read from the device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>BlockSize</em>&nbsp;</td><td>Size in bytes of each block to read </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>BufferPtr</em>&nbsp;</td><td>Pointer to the buffer where the read data is to be written to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="aab76d2c060a6e26073f4d03eb6abf46f"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_RequestSense" ref="aab76d2c060a6e26073f4d03eb6abf46f" args="(const uint8_t LUNIndex, SCSI_Request_Sense_Response_t *const SensePtr) ATTR_NON_NULL_PTR_ARG(2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_RequestSense </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a> *const &nbsp;</td>
          <td class="paramname"> <em>SensePtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Request Sense command to the attached device, to determine the current SCSI sense information. This gives error codes for the last issued SCSI command to the device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>SensePtr</em>&nbsp;</td><td>Pointer to the sense data structure where the sense data from the device is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a3496e09635f7f4ab8333ba21440c31a0"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_SendCommand" ref="a3496e09635f7f4ab8333ba21440c31a0" args="(CommandBlockWrapper_t *SCSICommandBlock, void *BufferPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t MassStore_SendCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html">CommandBlockWrapper_t</a> *&nbsp;</td>
          <td class="paramname"> <em>SCSICommandBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>BufferPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2b2ede2bceb24dce8ddedc55918a6f8c"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_SendReceiveData" ref="a2b2ede2bceb24dce8ddedc55918a6f8c" args="(CommandBlockWrapper_t *SCSICommandBlock, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t MassStore_SendReceiveData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00001.html">CommandBlockWrapper_t</a> *&nbsp;</td>
          <td class="paramname"> <em>SCSICommandBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>BufferPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad8e1a76103edb7da05f5c28d805ad985"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_TestUnitReady" ref="ad8e1a76103edb7da05f5c28d805ad985" args="(const uint8_t LUNIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_TestUnitReady </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Device Test Unit Ready command to the attached device, to determine if the device is ready to accept other commands.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a0c13e34b17c949e38edd360284deeac0"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_WaitForDataReceived" ref="a0c13e34b17c949e38edd360284deeac0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t MassStore_WaitForDataReceived </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab07ae7fad4ea55bccea42aba8e87b94a"></a><!-- doxytag: member="MassStoreCommands.h::MassStore_WriteDeviceBlock" ref="ab07ae7fad4ea55bccea42aba8e87b94a" args="(const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_WriteDeviceBlock </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&nbsp;</td>
          <td class="paramname"> <em>BlockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&nbsp;</td>
          <td class="paramname"> <em>Blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&nbsp;</td>
          <td class="paramname"> <em>BlockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>BufferPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Issues a SCSI Device Block Write command to the attached device, to write one or more data blocks to the storage medium from a buffer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>LUNIndex</em>&nbsp;</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>BlockAddress</em>&nbsp;</td><td>Start block address to write to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>Blocks</em>&nbsp;</td><td>Number of blocks to write to in the device </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>BlockSize</em>&nbsp;</td><td>Size in bytes of each block to write </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>BufferPtr</em>&nbsp;</td><td>Pointer to the buffer where the write data is to be sourced from</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2009 for LUFA Library - Mass Storage Host Demo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
