<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Denver Gingerich&#39;s Stripe Snoop Project: Denver Gingerich&#39;s USBSnoop Magnetic Card Reader Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Denver Gingerich's USBSnoop Magnetic Card Reader Project</h1><h3>0.0.0 </h3><h2><a class="anchor" id="SSec_Compat">
Demo Compatibility:</a></h2>
<p>The following list indicates what microcontrollers are compatible with this demo.</p>
<ul>
<li>AT90USB1287</li>
<li>AT90USB1286</li>
</ul>
<h2><a class="anchor" id="SSec_Info">
USB Information:</a></h2>
<p>The following table gives a rundown of the USB utilization of this demo.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>USB Mode:</b> </p>
</td><td><p>Device  </p>
</td></tr>
<tr>
<td><p><b>USB Class:</b> </p>
</td><td><p>Human Interface Device (HID)  </p>
</td></tr>
<tr>
<td><p><b>USB Subclass:</b> </p>
</td><td><p>Keyboard  </p>
</td></tr>
<tr>
<td><p><b>Relevant Standards:</b> </p>
</td><td><p>USBIF HID Standard, USBIF HID Usage Tables  </p>
</td></tr>
<tr>
<td><p><b>Usable Speeds:</b> </p>
</td><td><p>Full Speed Mode  </p>
</td></tr>
</table>
<h2><a class="anchor" id="SSec_Description">
Project Description:</a></h2>
<p>Firmware for a USB AVR powered USB TTL magnetic stripe reader (using a card reader such as the Omron V3B-4K) by Denver Gingerich. This project is designed to be used with the open source Stripe Snoop project at <a href="http://stripesnoop.sourceforge.net/">http://stripesnoop.sourceforge.net/</a>.</p>
<p>See <a href="http://ossguy.com/ss_usb/">http://ossguy.com/ss_usb/</a> for the USB reader hardware project website, including construction and support details.</p>
<p>To use, connect your magnetic card reader device to the USB AVR as follows (pin and port mapping may be adjusted from the project makefile):</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Signal:</b> </p>
</td><td><p><b>AVR Port:</b>  </p>
</td></tr>
<tr>
<td><p>Track 1 Data </p>
</td><td><p>PORTC, Pin 1  </p>
</td></tr>
<tr>
<td><p>Track 1 Clock </p>
</td><td><p>PORTC, Pin 2  </p>
</td></tr>
<tr>
<td><p>Track 2 Data </p>
</td><td><p>PORTC, Pin 3  </p>
</td></tr>
<tr>
<td><p>Track 2 Clock </p>
</td><td><p>PORTC, Pin 0  </p>
</td></tr>
<tr>
<td><p>Track 3 Data </p>
</td><td><p>PORTC, Pin 5  </p>
</td></tr>
<tr>
<td><p>Track 3 Clock </p>
</td><td><p>PORTC, Pin 6  </p>
</td></tr>
<tr>
<td><p>Card Detect </p>
</td><td><p>PORTC, Pin 4  </p>
</td></tr>
</table>
<p>This project is based on the LUFA Keyboard demonstration application, written by Denver Gingerich.</p>
<p>This application uses a keyboard HID driver to communicate the data collected a TTL magnetic stripe reader to the connected computer. The raw bitstream obtained from the magnetic stripe reader is "typed" through the keyboard driver as 0's and 1's. After every card swipe, the demo will send a return key.</p>
<h2><a class="anchor" id="SSec_Options">
Project Options</a></h2>
<p>The following defines can be found in this demo, which can control the demo behaviour when defined, or changed in value.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Define Name:</b> </p>
</td><td><p><b>Location:</b> </p>
</td><td><p><b>Description:</b>  </p>
</td></tr>
<tr>
<td><p>MAX_BITS </p>
</td><td><p><a class="el" href="a00007.html">CircularBitBuffer.h</a> </p>
</td><td><p>Gives the maximum number of bits per track which can be buffered by the device for later transmission to a host.  </p>
</td></tr>
<tr>
<td><p>MAG_T1_CLOCK </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's CLOCK line for the reader's track 1 output.  </p>
</td></tr>
<tr>
<td><p>MAG_T1_DATA </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's DATA line for the reader's track 1 output.  </p>
</td></tr>
<tr>
<td><p>MAG_T2_CLOCK </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's CLOCK line for the reader's track 2 output.  </p>
</td></tr>
<tr>
<td><p>MAG_T2_DATA </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's DATA line for the reader's track 2 output.  </p>
</td></tr>
<tr>
<td><p>MAG_T3_CLOCK </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's CLOCK line for the reader's track 3 output.  </p>
</td></tr>
<tr>
<td><p>MAG_T3_DATA </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's DATA line for the reader's track 3 output.  </p>
</td></tr>
<tr>
<td><p>MAG_CARDPRESENT </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the magnetic card reader's card detection output.  </p>
</td></tr>
<tr>
<td><p>MAG_PIN </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>PIN register that the magnetic card reader device is attached to.  </p>
</td></tr>
<tr>
<td><p>MAG_PORT </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>PORT register that the magnetic card reader device is attached to.  </p>
</td></tr>
<tr>
<td><p>MAG_DDR </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>DDR register that the magnetic card reader device is attached to.  </p>
</td></tr>
</table>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2009 for Denver Gingerich's Stripe Snoop Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
