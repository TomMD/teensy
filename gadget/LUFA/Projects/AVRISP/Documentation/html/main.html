<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AVRISP MKII Programmer Project: AVRISP MKII Programmer Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>AVRISP MKII Programmer Project</h1><h3>0.0.0 </h3><h2><a class="anchor" id="SSec_Compat">
Demo Compatibility:</a></h2>
<p>The following list indicates what microcontrollers are compatible with this demo.</p>
<ul>
<li>Series 7 USB AVRs</li>
<li>Series 6 USB AVRs</li>
<li>Series 4 USB AVRs</li>
<li>Series 2 USB AVRs</li>
</ul>
<h2><a class="anchor" id="SSec_Info">
USB Information:</a></h2>
<p>The following table gives a rundown of the USB utilization of this demo.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>USB Mode:</b> </p>
</td><td><p>Device  </p>
</td></tr>
<tr>
<td><p><b>USB Class:</b> </p>
</td><td><p>Vendor Specific Class  </p>
</td></tr>
<tr>
<td><p><b>USB Subclass:</b> </p>
</td><td><p>N/A  </p>
</td></tr>
<tr>
<td><p><b>Relevant Standards:</b> </p>
</td><td><p>Atmel AVRISP MKII Protocol Specification  </p>
</td></tr>
<tr>
<td><p><b>Usable Speeds:</b> </p>
</td><td><p>Full Speed Mode  </p>
</td></tr>
</table>
<h2><a class="anchor" id="SSec_Description">
Project Description:</a></h2>
<p>Firmware for an AVRStudio compatible AVRISP-MKII clone programmer. This project will enable the USB AVR series of microcontrollers to act as a clone of the official Atmel AVRISP-MKII programmer, usable within AVRStudio. In its most basic form, it allows for the programming of 5V AVRs from within AVRStudio with no special hardware other than the USB AVR and the parts needed for the USB interface. If the user desires, more advanced circuits incorporating level conversion can be made to allow for the programming of 3.3V AVR designs.</p>
<p>This device spoofs Atmel's official AVRISP-MKII device PID so that it remains compatible with Atmel's AVRISP-MKII drivers. When promted, direct your OS to install Atmel's AVRISP-MKII drivers provided with AVRStudio.</p>
<p>Note that this design currently has several limitations:</p>
<ul>
<li>Minimum target clock speed of 500KHz due to hardware SPI used</li>
<li>No reversed/shorted target connector detection and notification</li>
</ul>
<p>On AVR models with an ADC converter, ACC should be tied to 5V (e.g. VBUS) and the VTARGET_ADC_CHANNEL token should be set to an appropriate ADC channel number in the project makefile for VTARGET detection to operate correctly. On models without an ADC converter, VTARGET will report at a fixed 5V level.</p>
<p>Connections to the device are simple:</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Programmer Pin:</b> </p>
</td><td><p><b>Target Device Pin:</b> </p>
</td><td><p><b>ISP 6 Pin Layout:</b>  </p>
</td></tr>
<tr>
<td><p>MISO </p>
</td><td><p>PDO </p>
</td><td><p>1  </p>
</td></tr>
<tr>
<td><p>ADCx <b><sup>1</sup></b> </p>
</td><td><p>VTARGET </p>
</td><td><p>2  </p>
</td></tr>
<tr>
<td><p>SCLK </p>
</td><td><p>SCLK </p>
</td><td><p>3  </p>
</td></tr>
<tr>
<td><p>MOSI </p>
</td><td><p>PDI </p>
</td><td><p>4  </p>
</td></tr>
<tr>
<td><p>PORTx.y <b><sup>2</sup></b> </p>
</td><td><p>/RESET </p>
</td><td><p>5  </p>
</td></tr>
<tr>
<td><p>GND </p>
</td><td><p>GND </p>
</td><td><p>6  </p>
</td></tr>
</table>
<p><b><sup>1</sup></b> <em>Optional, see <a class="el" href="main.html#SSec_Options">Project Options</a> section - for USB AVRs with ADC modules only</em> <br/>
 <b><sup>2</sup></b> <em>See <a class="el" href="main.html#SSec_Options">Project Options</a> section</em></p>
<h2><a class="anchor" id="SSec_Options">
Project Options</a></h2>
<p>The following defines can be found in this demo, which can control the demo behaviour when defined, or changed in value.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Define Name:</b> </p>
</td><td><p><b>Location:</b> </p>
</td><td><p><b>Description:</b>  </p>
</td></tr>
<tr>
<td><p>RESET_LINE_PORT </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>PORT register for the programmer's target RESET line.  </p>
</td></tr>
<tr>
<td><p>RESET_LINE_DDR </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>DDR register for the programmer's target RESET line.  </p>
</td></tr>
<tr>
<td><p>RESET_LINE_MASK </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>Mask for the programmer's target RESET line on the chosen port. <b>Must not be the AVR's /SS pin</b>, as the target pins are tri-stated when not in use, and low signals on the /SS pin will force SPI slave mode when the pin is configured as an input.  </p>
</td></tr>
<tr>
<td><p>VTARGET_ADC_CHANNEL </p>
</td><td><p>Makefile CDEFS </p>
</td><td><p>ADC channel number (on supported AVRs) to use for VTARGET level detection.  </p>
</td></tr>
</table>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2009 for AVRISP MKII Programmer Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
