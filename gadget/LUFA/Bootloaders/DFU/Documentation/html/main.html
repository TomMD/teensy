<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LUFA Library - DFU Class Bootloader: DFU Class USB AVR Bootloader</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DFU Class USB AVR Bootloader</h1><h3>0.0.0 </h3><h2><a class="anchor" id="SSec_Compat">
Demo Compatibility:</a></h2>
<p>The following list indicates what microcontrollers are compatible with this demo.</p>
<ul>
<li>Series 7 USB AVRs</li>
<li>Series 6 USB AVRs</li>
<li>Series 4 USB AVRs</li>
<li>Series 2 USB AVRs (Excluding the 8KB FLASH variants)</li>
</ul>
<h2><a class="anchor" id="SSec_Info">
USB Information:</a></h2>
<p>The following table gives a rundown of the USB utilization of this demo.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>USB Mode:</b> </p>
</td><td><p>Device  </p>
</td></tr>
<tr>
<td><p><b>USB Class:</b> </p>
</td><td><p>Device Firmware Update Class (DFU)  </p>
</td></tr>
<tr>
<td><p><b>USB Subclass:</b> </p>
</td><td><p>None  </p>
</td></tr>
<tr>
<td><p><b>Relevant Standards:</b> </p>
</td><td><p>USBIF DFU Class Standard, Atmel USB Bootloader Datasheet  </p>
</td></tr>
<tr>
<td><p><b>Usable Speeds:</b> </p>
</td><td><p>Full Speed Mode  </p>
</td></tr>
</table>
<h2><a class="anchor" id="SSec_Description">
Project Description:</a></h2>
<p>This bootloader enumerates to the host as a DFU Class device, allowing for DFU-compatible programming software to load firmware onto the AVR.</p>
<p>This bootloader is compatible with Atmel's FLIP application. However, it requires the use of Atmel's DFU drivers. You will need to install Atmel's DFU drivers prior to using this bootloader. If you are using a 64 bit Windows OS, you will need to either disable the driver signing requirement (see online tutorials for details) or use a digitally signed version of the official Atmel driver provided by a third party AVR user at <a href="http://www.avrfreaks.net/index.php?module=Freaks%20Academy&func=viewItem&item_id=2196&item_type=project">http://www.avrfreaks.net/index.php?module=Freaks%20Academy&amp;func=viewItem&amp;item_id=2196&amp;item_type=project</a>.</p>
<p>As an open-source option, this bootloader is also compatible with the Linux Atmel USB DFU Programmer software, available for download at <a href="http://sourceforge.net/projects/dfu-programmer/">http://sourceforge.net/projects/dfu-programmer/</a>.</p>
<p>If SECURE_MODE is defined as true, upon start-up the bootloader will be locked, with only the chip erase function available (similar to Atmel's DFU bootloader). If SECURE_MODE is defined as false, all functions are usable on start-up without the prerequisite firmware erase.</p>
<p>Out of the box this bootloader builds for the USB1287, and should fit into 4KB of bootloader space. If you wish to enlarge this space and/or change the AVR model, you will need to edit the BOOT_START and MCU values in the accompanying makefile.</p>
<p><b>NOTE:</b> This device spoofs Atmel's DFU Bootloader USB VID and PID so that the Atmel DFU bootloader drivers included with FLIP will work. If you do not wish to use Atmel's ID codes, please manually change them in <a class="el" href="a00007.html">Descriptors.c</a> and alter your driver's INF file accordingly.</p>
<h2><a class="anchor" id="SSec_Options">
Project Options</a></h2>
<p>The following defines can be found in this demo, which can control the demo behaviour when defined, or changed in value.</p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p><b>Define Name:</b> </p>
</td><td><p><b>Location:</b> </p>
</td><td><p><b>Description:</b>  </p>
</td></tr>
<tr>
<td><p>SECURE_MODE </p>
</td><td><p><a class="el" href="a00005.html">BootloaderDFU.h</a> </p>
</td><td><p>If defined to true, the bootloader will not accept any memory commands other than a chip erase on start-up, until an erase has been performed. This can be used in conjunction with the AVR's lockbits to prevent the AVRs firmware from being dumped by unauthorized persons.  </p>
</td></tr>
</table>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Dec 2009 for LUFA Library - DFU Class Bootloader by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
